const App={currentUser:null,selectedItems:[],selectedSide:'H',joiningCoinflipId:null,async init(){await DB.init();this.simulateLoading()},simulateLoading(){const bar=document.getElementById('loadingBar');const text=document.getElementById('loadingText');const steps=[{p:20,t:'Loading...'},{p:40,t:'Connecting...'},{p:60,t:'Loading items...'},{p:80,t:'Preparing...'},{p:100,t:'Ready!'}];let i=0;const interval=setInterval(()=>{if(i<steps.length){bar.style.width=steps[i].p+'%';text.textContent=steps[i].t;i++}else{clearInterval(interval);setTimeout(()=>{document.getElementById('loadingScreen').classList.add('hidden');this.checkAuth()},400)}},350)},checkAuth(){const saved=localStorage.getItem('brainrotflip_current_user');if(saved){const user=DB.getUser(saved);if(user){this.currentUser=user;this.showApp();return}}this.showLogin()},showLogin(){this.generateVerificationCode();document.getElementById('root').innerHTML=this.getLoginHTML()},generateVerificationCode(){const code='BRF-'+Math.random().toString(36).substring(2,8).toUpperCase();localStorage.setItem('brainrotflip_verification_code',code);return code},getLoginHTML(){const code=localStorage.getItem('brainrotflip_verification_code')||this.generateVerificationCode();return`<div class="modal-overlay"><div class="modal"><div class="modal-header"><h2>ğŸ® Login with Roblox</h2></div><input type="text" class="modal-input" id="loginUsername" placeholder="Your Roblox Username"><div class="verification-box"><label>Put this code in your Roblox description:</label><div class="verification-code"><code>${code}</code><button class="copy-btn" onclick="App.copyVerificationCode('${code}')">Copy</button></div></div><div class="cf-turnstile" data-sitekey="0x4AAAAAAAzC9w_G_tXXXXXX" data-theme="dark"></div><button class="modal-btn" onclick="App.verifyAndLogin()">Verify & Login</button><p class="modal-note">Complete verification then login</p></div></div>`},copyVerificationCode(code){navigator.clipboard.writeText(code);this.showToast('Code copied!','success')},async verifyAndLogin(){const username=document.getElementById('loginUsername').value.trim();if(!username){this.showToast('Enter username!','error');return}let user=DB.getUser(username);if(!user){const robloxId=Math.floor(Math.random()*9999999999);user=DB.createUser(username,robloxId)}this.currentUser=user;localStorage.setItem('brainrotflip_current_user',username);this.showToast('Welcome!','success');this.showApp()},showApp(){document.getElementById('root').innerHTML=this.getAppHTML();this.updateUI();this.loadCoinflips();this.loadChat();this.startIntervals();if(this.currentUser.isAdmin){document.getElementById('adminNavItem').style.display='flex';this.loadAdminPanel()}},startIntervals(){setInterval(()=>this.loadCoinflips(),3000);setInterval(()=>this.loadChat(),2000)},getAppHTML(){return`<div class="app-container"><nav class="sidebar"><div class="sidebar-logo"><div class="logo-icon">B</div><span class="logo-text">BrainrotFlip</span></div><div class="sidebar-nav"><div class="nav-section"><div class="nav-section-title">Games</div><div class="nav-item active" onclick="App.navigateTo('home')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg>Home</div><div class="nav-item" onclick="App.navigateTo('coinflip')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/></svg>Coinflip</div></div><div class="nav-section"><div class="nav-section-title">More</div><div class="nav-item" onclick="App.navigateTo('profile')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>Profile</div><div class="nav-item" onclick="App.navigateTo('leaderboard')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 20V10M18 20V4M6 20v-4"/></svg>Leaderboard</div><div class="nav-item" id="adminNavItem" style="display:none;" onclick="App.navigateTo('admin')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>Admin</div></div><div class="nav-section"><div class="nav-item logout" onclick="App.logout()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4M16 17l5-5-5-5M21 12H9"/></svg>Logout</div></div></div><div class="sidebar-footer"><div class="discord-promo"><p>Join Discord!</p><a href="#" class="discord-btn">Join</a></div></div></nav><main class="main-content"><header class="header"><div class="header-left"><div class="balance-display"><span>ğŸ’</span><span id="headerBalance">0</span></div><button class="wallet-btn" onclick="App.openWalletModal()">Wallet</button></div><div class="header-right"><div class="level-badge"><span class="level-number" id="headerLevel">1</span><span>Level</span></div><img class="user-avatar" id="headerAvatar" src="" onclick="App.navigateTo('profile')"></div></header><div class="page-content" id="pageContent"></div></main><aside class="chat-sidebar"><div class="chat-header"><h3>ğŸ’¬ Chat</h3></div><div class="chat-messages" id="chatMessages"></div><div class="chat-input-area"><div class="chat-input-row"><input type="text" class="chat-input" id="chatInput" placeholder="Message..." maxlength="200" onkeypress="if(event.key==='Enter')App.sendChatMessage()"><button class="chat-send-btn" onclick="App.sendChatMessage()">â¤</button></div></div><div class="chat-online-count"><span class="online-indicator"></span><span id="onlineCount">0</span> online</div></aside></div>`},navigateTo(page){const content=document.getElementById('pageContent');if(page==='home')content.innerHTML=this.getHomeHTML();else if(page==='coinflip')content.innerHTML=this.getCoinflipHTML();else if(page==='profile')content.innerHTML=this.getProfileHTML();else if(page==='leaderboard')content.innerHTML=this.getLeaderboardHTML();else if(page==='admin')content.innerHTML=this.getAdminHTML();document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));event.target.classList.add('active');if(page==='coinflip')this.loadCoinflips();if(page==='profile'){this.currentUser=DB.getUser(this.currentUser.username);this.updateUI()}if(page==='leaderboard')this.loadLeaderboard()},getHomeHTML(){return`<div class="page active"><div class="hero-section"><div class="hero-card welcome"><h3>Welcome to</h3><h2>BrainrotFlip</h2><p>Best <strong>brainrot</strong> gambling</p><button class="hero-btn primary" onclick="App.navigateTo('coinflip')">Play Now</button><div class="hero-decoration">ğŸ°</div></div><div class="hero-card race"><h3>Compete</h3><h2>WAGER RACE</h2><p>Win <strong>prizes</strong></p><button class="hero-btn secondary" onclick="App.navigateTo('race')">Join</button></div></div><div class="games-grid"><div class="game-card" onclick="App.navigateTo('coinflip')"><div class="game-card-icon">ğŸª™</div><h3>COINFLIP</h3></div><div class="game-card disabled"><div class="game-card-icon">ğŸ°</div><h3>JACKPOT</h3><div style="font-size:0.8rem;opacity:0.8;">Soon</div></div><div class="game-card disabled"><div class="game-card-icon">ğŸ“ˆ</div><h3>UPGRADER</h3><div style="font-size:0.8rem;opacity:0.8;">Soon</div></div></div></div>`},getCoinflipHTML(){return`<div class="page active"><h1 class="page-title">ğŸª™ Coinflip</h1><div class="stats-row"><div class="stat-card"><div class="value" id="cfStatRooms">0</div><div class="label">Rooms</div></div><div class="stat-card"><div class="value" id="cfStatValue">0</div><div class="label">Value</div></div><div class="stat-card"><div class="value" id="cfStatItems">0</div><div class="label">Items</div></div></div><div class="actions-row"><button class="action-btn create" onclick="App.openCreateModal()">Create</button></div><div class="filters-row"><div class="filter-group"><span>ğŸŸ¢</span><span id="filterHeadsCount">0</span></div><div class="filter-group"><span>ğŸ”´</span><span id="filterTailsCount">0</span></div></div><div class="coinflip-list" id="coinflipList"></div></div>`},getProfileHTML(){return`<div class="page active"><div class="profile-header-card"><img class="profile-avatar-large" id="profileAvatar" src=""><div class="profile-details"><h2 id="profileUsername">${this.currentUser.username}</h2><div>Level <span id="profileLevel">${this.currentUser.level}</span></div></div></div><div class="profile-stats-grid"><div class="profile-stat-card"><div class="icon">ğŸ’</div><div class="value" id="profileWagered">0</div><div class="label">Wagered</div></div><div class="profile-stat-card"><div class="icon">ğŸ†</div><div class="value" id="profileWon">0</div><div class="label">Won</div></div><div class="profile-stat-card"><div class="icon">ğŸ“‰</div><div class="value" id="profileLost">0</div><div class="label">Lost</div></div></div><div class="inventory-section"><h3>ğŸ“¦ Inventory</h3><div class="inventory-grid" id="profileInventory"></div></div></div>`},getLeaderboardHTML(){return`<div class="page active"><h1 class="page-title">ğŸ† Leaderboard</h1><div class="leaderboard-list" id="leaderboardList"></div></div>`},getAdminHTML(){return`<div class="page active"><h1 class="page-title">ğŸ›¡ï¸ Admin</h1><div style="background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:16px;padding:1.5rem;margin-bottom:1.5rem;"><h3 style="margin-bottom:1rem;">â• Add Items</h3><input type="text" class="modal-input" id="adminAddUsername" placeholder="Username" style="margin-bottom:0;"><div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1rem;"><select class="modal-input" id="adminAddItem" style="margin-bottom:0;"></select><input type="number" class="modal-input" id="adminAddQty" value="1" min="1" style="margin-bottom:0;"></div><button class="modal-btn" onclick="App.adminAddItem()">Add</button></div><div style="background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:16px;padding:1.5rem;"><h3 style="margin-bottom:1rem;">ğŸ‘¥ Users</h3><div id="adminUsersList"></div></div></div>`},updateUI(){const balance=DB.getUserBalance(this.currentUser.username);document.getElementById('headerBalance').textContent=this.formatNumber(balance);document.getElementById('headerLevel').textContent=this.currentUser.level;document.getElementById('headerAvatar').src=this.currentUser.avatar;if(document.getElementById('profileAvatar')){document.getElementById('profileAvatar').src=this.currentUser.avatar;document.getElementById('profileWagered').textContent=this.formatNumber(this.currentUser.stats.wagered);document.getElementById('profileWon').textContent=this.formatNumber(this.currentUser.stats.won);document.getElementById('profileLost').textContent=this.formatNumber(this.currentUser.stats.lost);this.renderInventory()}},renderInventory(){const container=document.getElementById('profileInventory');if(!container)return;const items=this.currentUser.inventory;if(items.length===0){container.innerHTML='<div class="empty-inventory">No items</div>';return}container.innerHTML=items.map(item=>`<div class="inventory-item"><div class="icon">${item.icon}</div><div class="name">${item.name}</div><div class="value">${item.value} ğŸ’</div></div>`).join('')},formatNumber(num){if(num>=1e6)return(num/1e6).toFixed(1)+'M';if(num>=1e3)return(num/1e3).toFixed(1)+'K';return num.toString()},loadCoinflips(){const coinflips=DB.getActiveCoinflips();const container=document.getElementById('coinflipList');if(!container)return;document.getElementById('cfStatRooms').textContent=coinflips.length;document.getElementById('cfStatValue').textContent=this.formatNumber(coinflips.reduce((s,cf)=>s+cf.totalValue,0));document.getElementById('cfStatItems').textContent=coinflips.reduce((s,cf)=>s+cf.creatorItems.length,0);const headsCount=coinflips.filter(cf=>cf.creatorSide==='H').length;document.getElementById('filterHeadsCount').textContent=headsCount;document.getElementById('filterTailsCount').textContent=coinflips.length-headsCount;if(coinflips.length===0){container.innerHTML='<div class="no-games-message"><div class="icon">ğŸª™</div><p>No active games</p></div>';return}container.innerHTML=coinflips.map(cf=>`<div class="coinflip-card"><div class="cf-players"><div class="cf-player ${cf.creatorSide==='H'?'green':'red'}"><img class="cf-player-avatar" src="${cf.creatorAvatar}"><div class="cf-player-info"><div class="name ${cf.creatorSide==='H'?'green':'red'}">${cf.creator}</div><div style="font-size:0.8rem;color:var(--text-secondary);">${cf.creatorItems.length} items</div></div></div><div class="vs-badge">VS</div><div class="cf-player waiting"><img class="cf-player-avatar" src="https://tr.rbxcdn.com/30DAY-AvatarHeadshot-B0C12D22C5A8D936F9DD4B5C5A770B8E-Png/150/150/AvatarHeadshot/Webp/noFilter"><div class="cf-player-info"><div class="name waiting">Waiting...</div></div></div></div><div class="cf-value"><div class="amount">${this.formatNumber(cf.totalValue)} ğŸ’</div><div class="label">Value</div></div>${cf.creator!==this.currentUser.username?`<button class="join-btn" onclick="App.openJoinModal('${cf.id}')">Join</button>`:`<span style="color:var(--text-secondary);font-style:italic;">Your game</span>`}</div>`).join('')},openCreateModal(){this.selectedItems=[];this.selectedSide='H';this.currentUser=DB.getUser(this.currentUser.username);const modal=document.createElement('div');modal.className='modal-overlay';modal.id='createCfModal';modal.innerHTML=`<div class="modal wide"><div class="modal-header"><h2>ğŸ° Create Coinflip</h2><button class="modal-close" onclick="App.closeModal('createCfModal')">Ã—</button></div><p style="color:var(--text-secondary);margin-bottom:1rem;">Select items:</p><div class="items-grid" id="createItemsGrid">${this.currentUser.inventory.length===0?'<p style="color:var(--text-secondary);grid-column:span 4;text-align:center;padding:2rem;">No items</p>':this.currentUser.inventory.map(item=>`<div class="item-card" data-id="${item.uniqueId}" data-value="${item.value}" onclick="App.toggleItem(this,'create')"><div class="icon">${item.icon}</div><div class="name">${item.name}</div><div class="value">${item.value} ğŸ’</div></div>`).join('')}</div><div class="selected-summary"><span class="label">Total:</span><span class="total" id="createTotal">0 ğŸ’</span></div><p style="color:var(--text-secondary);margin-bottom:0.75rem;">Choose side:</p><div class="side-selector"><div class="side-option green selected" data-side="H" onclick="App.selectSide('H',this)"><div class="icon">ğŸŸ¢</div><div>Heads</div></div><div class="side-option" data-side="T" onclick="App.selectSide('T',this)"><div class="icon">ğŸ”´</div><div>Tails</div></div></div><button class="modal-btn success" onclick="App.createCoinflip()">Create</button></div>`;document.body.appendChild(modal)},openJoinModal(coinflipId){this.selectedItems=[];this.joiningCoinflipId=coinflipId;this.currentUser=DB.getUser(this.currentUser.username);const cf=DB.getCoinflip(coinflipId);if(!cf)return;const modal=document.createElement('div');modal.className='modal-overlay';modal.id='joinCfModal';modal.innerHTML=`<div class="modal wide"><div class="modal-header"><h2>âš”ï¸ Join Coinflip</h2><button class="modal-close" onclick="App.closeModal('joinCfModal')">Ã—</button></div><p>Joining: <strong>${cf.creator}</strong></p><p style="color:var(--text-secondary);margin-bottom:1rem;">Required: <strong style="color:var(--accent-green);">${this.formatNumber(cf.totalValue)} ğŸ’</strong></p><div class="items-grid" id="joinItemsGrid">${this.currentUser.inventory.length===0?'<p style="color:var(--text-secondary);grid-column:span 4;text-align:center;padding:2rem;">No items</p>':this.currentUser.inventory.map(item=>`<div class="item-card" data-id="${item.uniqueId}" data-value="${item.value}" onclick="App.toggleItem(this,'join')"><div class="icon">${item.icon}</div><div class="name">${item.name}</div><div class="value">${item.value} ğŸ’</div></div>`).join('')}</div><div class="selected-summary"><span class="label">Total:</span><span class="total" id="joinTotal">0 ğŸ’</span></div><button class="modal-btn success" onclick="App.confirmJoinCoinflip()">Join</button></div>`;document.body.appendChild(modal)},toggleItem(el,modalType){const uniqueId=el.dataset.id;if(el.classList.contains('selected')){el.classList.remove('selected');this.selectedItems=this.selectedItems.filter(i=>i.uniqueId!==uniqueId)}else{el.classList.add('selected');const item=this.currentUser.inventory.find(i=>i.uniqueId===uniqueId);if(item)this.selectedItems.push(item)}const total=this.selectedItems.reduce((s,i)=>s+i.value,0);document.getElementById(modalType==='create'?'createTotal':'joinTotal').textContent=this.formatNumber(total)+' ğŸ’'},selectSide(side,el){this.selectedSide=side;document.querySelectorAll('.side-option').forEach(opt=>{opt.classList.remove('selected','green','red');if(opt===el){opt.classList.add('selected',side==='H'?'green':'red')}})},createCoinflip(){if(this.selectedItems.length===0){this.showToast('Select items!','error');return}const cf=DB.createCoinflip(this.currentUser.username,this.selectedItems,this.selectedSide);if(cf){this.closeModal('createCfModal');this.showToast('Coinflip created!','success');this.loadCoinflips();this.currentUser=DB.getUser(this.currentUser.username);this.updateUI()}},confirmJoinCoinflip(){const cf=DB.getCoinflip(this.joiningCoinflipId);if(!cf)return;const selectedTotal=this.selectedItems.reduce((s,i)=>s+i.value,0);const minReq=cf.totalValue*0.9,maxReq=cf.totalValue*1.1;if(selectedTotal<minReq||selectedTotal>maxReq){this.showToast(`Value must be ${this.formatNumber(minReq)}-${this.formatNumber(maxReq)}`,'error');return}const joined=DB.joinCoinflip(this.joiningCoinflipId,this.currentUser.username,this.selectedItems);if(joined){this.closeModal('joinCfModal');this.startCoinflipAnimation(joined)}},startCoinflipAnimation(cf){const winnerSide=Math.random()<0.5?'H':'T';const videoSrc=winnerSide==='H'?'assets/H_Tiles.mp4':'assets/T_Tails.mp4';const modal=document.createElement('div');modal.className='modal-overlay';modal.id='cfAnimationModal';modal.innerHTML=`<div class="modal" style="max-width:520px;text-align:center;"><h2 style="margin-bottom:1rem;">âš¡ COINFLIP âš¡</h2><div class="cf-arena"><div class="arena-players"><div class="arena-player"><img src="${cf.creatorAvatar}"><div class="name">${cf.creator}</div><div class="value">${this.formatNumber(cf.totalValue)} ğŸ’</div></div><div class="vs-badge">VS</div><div class="arena-player red"><img src="${cf.opponentAvatar}"><div class="name">${cf.opponent}</div><div class="value">${this.formatNumber(cf.opponentItems.reduce((s,i)=>s+i.value,0))} ğŸ’</div></div></div><div class="coin-container"><video id="coinVideo" style="width:300px;height:300px;border-radius:16px;" autoplay muted><source src="${videoSrc}" type="video/mp4"></video></div></div><div class="winner-banner" id="winnerBanner">ğŸ† <span id="winnerName"></span> WINS!</div></div>`;document.body.appendChild(modal);const video=document.getElementById('coinVideo');video.onended=()=>{const result=DB.finishCoinflip(cf.id,winnerSide);const banner=document.getElementById('winnerBanner');document.getElementById('winnerName').textContent=result.winner;const isWinner=result.winner===this.currentUser.username;banner.classList.add('show',isWinner?'win':'loss');this.currentUser=DB.getUser(this.currentUser.username);this.updateUI();this.loadCoinflips();setTimeout(()=>this.closeModal('cfAnimationModal'),3000)}},loadChat(){const msgs=DB.getChatMessages();const container=document.getElementById('chatMessages');if(!container)return;container.innerHTML=msgs.map(m=>`<div class="chat-message"><img src="${m.avatar}"><div class="message-content"><div class="message-header"><span class="message-name ${m.isAdmin?'admin':''}">${m.username}</span><span class="message-time">${this.formatTime(m.timestamp)}</span></div><div class="message-text">${this.escapeHtml(m.message)}</div></div></div>`).join('');container.scrollTop=container.scrollHeight;document.getElementById('onlineCount').textContent=Math.floor(Math.random()*50)+10},sendChatMessage(){const input=document.getElementById('chatInput');const msg=input.value.trim();if(!msg)return;DB.addChatMessage(this.currentUser.username,msg);input.value='';this.loadChat()},formatTime(ts){return new Date(ts).toLocaleTimeString('fr-FR',{hour:'2-digit',minute:'2-digit'})},escapeHtml(t){const d=document.createElement('div');d.textContent=t;return d.innerHTML},loadLeaderboard(){const users=DB.getLeaderboard('wagered');const container=document.getElementById('leaderboardList');if(!container)return;container.innerHTML=users.map((u,i)=>`<div class="lb-item"><div class="lb-rank ${i===0?'gold':i===1?'silver':i===2?'bronze':''}">${i<3?['ğŸ¥‡','ğŸ¥ˆ','ğŸ¥‰'][i]:'#'+(i+1)}</div><div class="lb-player"><img src="${u.avatar}"><span>${u.username}</span></div><div class="lb-wagered">${this.formatNumber(u.stats.wagered)} ğŸ’</div></div>`).join('')},loadAdminPanel(){const select=document.getElementById('adminAddItem');if(select){select.innerHTML=DB.getAllItems().map(i=>`<option value="${i.id}">${i.icon} ${i.name}</option>`).join('')}const usersList=document.getElementById('adminUsersList');if(usersList){const users=DB.getAllUsers();usersList.innerHTML=users.map(u=>`<div style="display:flex;align-items:center;justify-content:space-between;padding:0.875rem;border-bottom:1px solid var(--border-color);"><div style="display:flex;align-items:center;gap:0.75rem;"><img src="${u.avatar}" style="width:38px;height:38px;border-radius:50%;"><div><div style="font-weight:600;">${u.username}</div><div style="font-size:0.8rem;color:var(--text-secondary);">Balance: ${this.formatNumber(DB.getUserBalance(u.username))} ğŸ’</div></div></div></div>`).join('')}},adminAddItem(){const username=document.getElementById('adminAddUsername').value.trim();const itemId=document.getElementById('adminAddItem').value;const qty=parseInt(document.getElementById('adminAddQty').value)||1;if(!username){this.showToast('Enter username!','error');return}if(!DB.getUser(username)){this.showToast('User not found!','error');return}DB.addItemToUser(username,itemId,qty);this.showToast(`Added ${qty}x to ${username}`,'success');document.getElementById('adminAddUsername').value='';this.loadAdminPanel()},openWalletModal(){const modal=document.createElement('div');modal.className='modal-overlay';modal.id='walletModal';modal.innerHTML=`<div class="modal"><div class="modal-header"><h2>ğŸ’ Deposit</h2><button class="modal-close" onclick="App.closeModal('walletModal')">Ã—</button></div><p style="color:var(--text-secondary);margin-bottom:1rem;">Contact staff on Discord to deposit.</p><div style="background:var(--bg-tertiary);padding:1.25rem;border-radius:12px;margin-bottom:1rem;"><p style="font-weight:600;margin-bottom:0.75rem;">How to Deposit:</p><ol style="color:var(--text-secondary);font-size:0.9rem;margin-left:1.25rem;"><li>Join Discord</li><li>Open ticket</li><li>Trade items to staff</li><li>Items added to account</li></ol></div></div>`;document.body.appendChild(modal)},closeModal(modalId){const modal=document.getElementById(modalId);if(modal)modal.remove()},showToast(msg,type='info'){const container=document.getElementById('toastContainer');const toast=document.createElement('div');toast.className=`toast ${type}`;toast.innerHTML=`<span>${type==='success'?'âœ…':type==='error'?'âŒ':'â„¹ï¸'}</span><span>${msg}</span>`;container.appendChild(toast);setTimeout(()=>{toast.style.opacity='0';setTimeout(()=>toast.remove(),300)},3000)},logout(){localStorage.removeItem('brainrotflip_current_user');location.reload()}};document.addEventListener('DOMContentLoaded',()=>App.init());window.App=App;